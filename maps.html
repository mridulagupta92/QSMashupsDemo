
<!DOCTYPE html>
<html>
<style> 
ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
    width: 500px;
    background-color: #f1f1f1;
    border: 1px solid #555;
	text-align: left;
	
}

li a {
    display: block;
    color: #000;
    padding: 8px 16px;
    text-decoration: none;
	text-align: left;
}

li {
    text-align: center;
    border-bottom: 1px solid #555;
	text-align: left;
}

li:last-child {
    border-bottom: none;
	text-align: left;
}
.flex-container {
    display: -webkit-flex;
    display: flex;  
    -webkit-flex-flow: row wrap;
    flex-flow: row wrap;
    text-align: center;
}

.flex-container > * {
    padding: 15px;
    -webkit-flex: 1 100%;
    flex: 1 100%;
}

.article {
    text-align: left;
}

header {background: black;color:white;}
footer {background: #aaa;color:white;}
.nav {background:#eee;}

.nav ul {
    list-style-type: none;
    padding: 10;
}
.nav ul a {
    text-decoration: none;
}
li a.active {
    background-color: #4CAF50;
    color: white;
}

li a:hover:not(.active) {
    background-color: #555;
    color: white;
}

@media all and (min-width: 768px) {
    .nav {text-align:left;-webkit-flex: 1 auto;flex:1 auto;-webkit-order:1;order:1;}
    .article {-webkit-flex:5 0px;flex:5 0px;-webkit-order:2;order:2;}
    footer {-webkit-order:3;order:3;}
}
</style>

<body onload="initMap(0)">

<div class="flex-container">
<header>
  <h1>Genentech Physician Locator</h1>
</header>


<nav class="nav" >

<ul>
<li><a href="#home" onclick="initMap(0)" ><p id="jason">Jason Bourne</p></a></li>
<li><a href="#news" onclick="initMap(1)"><p id="bill">Bill Nashville</p></a></li>
<li><a href="#contact" onclick="initMap(2)"><p id="katie">Katie Jacobs</p></a></li>
<li><a href="#about" onclick="initMap(3)"><p id="russel">Russell Peters</p></a></li>
<li><a href="#home" onclick="initMap(4)"><p id="leiv">Leiv Schreiber</p></a></li>
<li><a href="#news" onclick="initMap(5)"><p id="xandar">Xandar Targarian</p></a></li>
<li><a href="#contact" onclick="initMap(6)"><p id="jing">Jing Su Ni Kao</p></a></li>
<li><a href="#about" onclick="initMap(7)"><p id="marco">Marco Materezzi</p></a></li>
<li><a href="#home" onclick="initMap(8)"><p id="jenson">Jenson Button</p></a></li>
</ul>
</nav>

<article class="article">
 <head> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
  <title>Google Maps Multiple Markers</title> 
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcvL0nx2FY43mVMBMiX61v8Zc-UZ8hedA"
          type="text/javascript"></script>
</head> 
<body>
  
  <div id="map" style="width: 1000px; height: 500px;"></div>

  <script type="text/javascript">
    var locations = [
      	['Jason Bourne', 28.469828, 77.030716, 1],
		['Bill Nashville', 28.503542, 77.086723, 2],
		['Katie Jacobs', 28.531323, 77.145328, 3],
		['Russell Peters', 28.446645, 77.076371, 4],
		['Leiv Schreiber', 28.715565, 77.162145, 5],
		['Xandar Targarian', 28.435981, 77.048881, 6],
		['Jing Su Ni Kao', 28.422509, 77.091768, 7],
		['Marco Materezzi', 28.503472, 77.030531, 8],
		['Jenson Button', 28.489330, 77.013001, 9]
    ];
	// var map, infoWindow, start, dest;
	 
	 var nd;
	  function path(p1){
	  
	  nd=p1;
	  }
	   
	
/////////// Map Initialization  /////////////////////////////////////////////////////////////////////////////////////////////////////////
     var map, infoWindow, start, dest;
	  
	  function initMap(p) {
	  
	      var directionsService = new google.maps.DirectionsService;
          var directionsDisplay = new google.maps.DirectionsRenderer;
		  var bounds = new google.maps.LatLngBounds;
          map = new google.maps.Map(document.getElementById('map'),{ 
																		center: new google.maps.LatLng(28.462830, 77.057031),
																		zoom: 11
																	}
									);
		  infoWindow = new google.maps.InfoWindow;
		
		 var geocoder = new google.maps.Geocoder;
		 var service = new google.maps.DistanceMatrixService;
		 
        
	// Try HTML5 geolocation.
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
             var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
			
			start= new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
			dest=new google.maps.LatLng(locations[p][1], locations[p][2]);
			
			dest1=new google.maps.LatLng(locations[0][1], locations[0][2]);
			dest2=new google.maps.LatLng(locations[1][1], locations[1][2]);
			dest3=new google.maps.LatLng(locations[2][1], locations[2][2]);
			dest4=new google.maps.LatLng(locations[3][1], locations[3][2]);
			dest5=new google.maps.LatLng(locations[4][1], locations[4][2]);
			dest6=new google.maps.LatLng(locations[5][1], locations[5][2]);
			dest7=new google.maps.LatLng(locations[6][1], locations[6][2]);
			dest8=new google.maps.LatLng(locations[7][1], locations[7][2]);
			dest9=new google.maps.LatLng(locations[8][1], locations[8][2]);
			
			directionsDisplay.setMap(map);
			calculateAndDisplayRoute(directionsService, directionsDisplay);
			

            infoWindow.setPosition(pos);
            infoWindow.setContent('My Location');
            infoWindow.open(map);
            map.setCenter(pos);
			
		// distance matrix
		  service.getDistanceMatrix({
          origins: [start],
          destinations: [dest1,dest2,dest3,dest4,dest5,dest6,dest7,dest8,dest9],
          travelMode: 'DRIVING',
          unitSystem: google.maps.UnitSystem.METRIC,
          avoidHighways: false,
          avoidTolls: false
        },callbacka);
		///end of distance matrix
		
          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
		  
		  
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
		
		
		
		
		
		
		var marker, i;

    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
	
	
   }
   
   function callbacka(response, status) {
  if (status == 'OK') {
    var origins = response.originAddresses;
    var destinations = response.destinationAddresses;

    for (var i = 0; i < origins.length; i++) {
      var results = response.rows[i].elements;
      for (var j = 0; j < results.length; j++) {
        var element = results[j];
        var distance = element.distance.text;
        var duration = element.duration.text;
		//document.getElementById("jason").innerHTML+=" Distance: "+ distance;
        var from = origins[i];
        var to = destinations[j];
      }
	 
	  document.getElementById("jason").innerHTML=locations[0][0]+ " Distance: "+ results[0].distance.text;
	  document.getElementById("bill").innerHTML=locations[1][0]+" Distance: "+ results[1].distance.text;
	  document.getElementById("katie").innerHTML=locations[2][0]+" Distance: "+ results[2].distance.text;
	  document.getElementById("russel").innerHTML=locations[3][0]+" Distance: "+ results[3].distance.text;
	  document.getElementById("leiv").innerHTML=locations[4][0]+" Distance: "+ results[4].distance.text;
	  document.getElementById("xandar").innerHTML=locations[5][0]+" Distance: "+ results[5].distance.text;
	  document.getElementById("jing").innerHTML=locations[6][0]+" Distance: "+ results[6].distance.text;
	  document.getElementById("marco").innerHTML=locations[7][0]+" Distance: "+ results[7].distance.text;
	  document.getElementById("jenson").innerHTML=locations[8][0]+" Distance: "+ results[8].distance.text;
    }
  }
}
   function deleteMarkers(markersArray) {
        for (var i = 0; i < markersArray.length; i++) {
          markersArray[i].setMap(null);
        }
        markersArray = [];
      }

      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                              'Error: The Geolocation service failed.' :
                              'Error: Your browser doesn\'t support geolocation.');
        infoWindow.open(map);
      }

    function calculateAndDisplayRoute(directionsService, directionsDisplay) {
        directionsService.route({
          origin: start,
          destination: dest,
          travelMode: 'DRIVING'
        }, function(response, status) {
          if (status === 'OK') {
            directionsDisplay.setDirections(response);
          } else {
            window.alert('Directions request failed due to ' + status);
          }
        });
      }
	
  </script>
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcvL0nx2FY43mVMBMiX61v8Zc-UZ8hedA&callback=initMap">
    </script>
  
  
</body>
</article>

<footer>Copyright &copy; roche.com</footer>
</div>


</body>
</html>
